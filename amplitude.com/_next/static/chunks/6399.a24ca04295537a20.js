(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6399],{36399:function(e,t,l){"use strict";l.r(t),l.d(t,{TocView:function(){return h}});var i=l(85893),o=l(52154),s=l(85850),a=l(80519),n=l(94184),c=l.n(n),r=l(67294),d=l(51429),u=l.n(d),x=l(11163),m=l(54068);let f="Table of Contents",h=e=>{var t,l;let{toc:n,elements:d,top:h,bottom:v,listElementId:b="toc-list",sectionElementId:p="toc-sections",minWidth:g="388px",padding:j,verticalLine:y=!0,anchorOffset:w="-48px",stickyOffset:k="0px",scroll:N=!1,hasMobileNav:S=!1,mobileNavBottom:C,pageType:E}=e,{scrollTop:O,clientHeight:_,clientWidth:T}=(0,s.V)(),M=T<a.Uo.xl,[R,V]=(0,r.useState)(""),A=(0,r.useRef)({}),B=(0,r.useRef)(null),[P,q]=(0,r.useState)(!1),[z,H]=(0,r.useState)(0),I=["bookPage","glossaryPage"].includes(E),K="caseStudy"===E,L=(0,r.useMemo)(()=>(0,m.wV)(d,n.overview,n.overviewTitle),[d,n]),D=(0,x.useRouter)(),{asPath:F}=D,U=(0,r.useMemo)(()=>F.split("?")[0].split("#")[0].split("/"),[F]),Y=(0,r.useMemo)(()=>{let e=U.length>3?U[3]:void 0,t=I&&e?"/".concat(e):void 0;return t},[U,I]),G=(0,r.useCallback)(()=>{if(I&&Y){let e=Object.entries(L).find(e=>{let[,t]=e;return t.chapterSlug===Y});if(e)return e[0]}},[Y,I,L]),J=(0,r.useMemo)(()=>I?U.splice(0,3).join("/"):void 0,[U,I]),[Q,W]=(0,r.useState)(G),X=()=>{let e=document.body;e&&(e.style.overflow="visible"),q(!1)},Z=()=>{let e=document.body;e&&(e.style.overflow="hidden"),q(!0)},$=(e,t)=>{if(B.current){let l=B.current.querySelector("#".concat(e));null==l||l.scrollIntoView({behavior:N&&!t?"smooth":"auto"})}},[ee,et]=(0,r.useState)(void 0),[el,ei]=(0,r.useState)(!1),[eo,es]=(0,r.useState)(0);(0,r.useEffect)(()=>{if(et(M),(null==n?void 0:n.engage)&&!I&&(!M||S)&&B.current&&B.current){let e=B.current.querySelectorAll("#".concat(p," [data-toc-section-key]"));e.forEach(e=>{let t=e.getAttribute("data-toc-section-key");t&&L[t]&&(A.current[t]=e)})}},[n,p,T,S,I,L,M]),(0,r.useEffect)(()=>{if((null==n?void 0:n.engage)&&(!M||S)&&!I){let e=new Map;Object.entries(A.current).map(async t=>{let[l,i]=t,o=(0,m.eq)(i);(0,m.v4)(o,_)&&e.set(l,o)});let t=Array.from(e.entries());if(e.size>0){let l=t[0];if(e.size>1)for(let e of t)e[1].offsetTop<_/2.5&&(l=e);let i=l[0];i&&V(i)}}},[O,null==n?void 0:n.engage,_,T,S,b,Q,L,I,M]),(0,r.useEffect)(()=>{if(!K){var e,t;if(M&&S&&O>100){let t=document.getElementById("global-header-nav"),l=null==t?void 0:t.getBoundingClientRect();es(null!==(e=null==l?void 0:l.bottom)&&void 0!==e?e:0),ei(!0)}else{ei(!1);let e=document.getElementById("global-header-nav"),l=null==e?void 0:e.getBoundingClientRect();H(window.innerHeight-(null!==(t=null==l?void 0:l.bottom)&&void 0!==t?t:0)+60)}}},[O,T,S,el,_,E,K,M]);let ea=(0,r.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto";if(I){let{chapterSlug:l}=L[e],i="".concat(J).concat(l||"");location.pathname!==i&&history.pushState({multiPageDocumentChapterKey:e},"",i),W(e),V(e);let o=M?160:330;window.scrollY>o&&scrollTo({left:0,top:o,behavior:t})}},[J,M,L,I]);return((0,r.useEffect)(()=>{if(I){let e=e=>{var t;let{multiPageDocumentChapterKey:l}=null!==(t=e.state)&&void 0!==t?t:{},i=null!=l?l:Object.keys(L)[0];ea(i)};return window.addEventListener("popstate",e),history.replaceState({},"",location.href),()=>{window.removeEventListener("popstate",e)}}},[ea,L,I]),(null==n?void 0:n.engage)&&0!==Object.keys(L).length)?(0,i.jsxs)("div",{children:[ee&&el&&(0,i.jsxs)("div",{className:c()("fixed top-0 z-10 w-full bg-purple-extralight text-black",P?"h-full max-h-full":"max-h-fit"),style:{marginTop:"".concat(eo,"px"),transform:"translate3d(0,0,0)"},children:[(0,i.jsxs)("div",{className:c()("relative px-5 py-3 text-black",u().toc),style:{transform:"translate3d(0,0,0)"},children:[(0,i.jsxs)("button",{onClick:()=>{P?X():Z()},"aria-label":"Open Mobile Navigation",className:"radius-3 flex min-h-[36px] w-full flex-row items-center justify-between gap-4 text-left",children:[(0,i.jsx)("div",{className:c()("flex w-full flex-col",P?"hidden":"block"),children:Object.entries(L).map((e,t)=>{let[l,{title:o,lead:s}]=e;return(0,i.jsxs)("div",{className:c()((0!==t||R)&&R!==l?"hidden":"no-scrollbar  line-clamp-1 block overflow-hidden","text-base font-[500] leading-5"),children:[s&&"".concat(s,":")," ",o]},"toc-sticky-mobile-item-".concat(l))})}),(0,i.jsx)("div",{className:c()(P?"block":"hidden"),children:(0,i.jsx)("div",{className:"line-clamp-1 font-gellix text-sm tracking-[1.25]",children:null!==(t=n.title)&&void 0!==t?t:f})}),(0,i.jsx)("div",{className:c()("mobile-toc-sticky-arrow",P?"collapsed":"expanded"),children:(0,i.jsx)(o.P,{iconKey:o.O.downArrow})})]}),(0,i.jsx)("div",{className:c()(P?"block":"hidden","no-scrollbar relative mt-6 flex w-full flex-col overflow-scroll"),style:{maxHeight:"".concat(_-eo-(C?156:60),"px")},children:(0,i.jsx)("ul",{className:"border-0 border-l-1 border-gray-18",children:Object.entries(L).map((e,t)=>{let[l,{title:o,anchor:s,lead:a}]=e;return(0,i.jsx)("li",{className:c()("list-item",{"active-toc-item":!I&&R===l||I&&0===t&&!Q||Q===l}),children:(0,i.jsxs)("button",{onClick:()=>{I?ea(l):$(s),setTimeout(()=>{X()},500)},"aria-label":o,className:"w-full text-left",children:[a&&(0,i.jsx)("div",{className:"mb-1 text-[11px] leading-[12px]",children:a}),o]})},"toc-mobile-item-".concat(l))})})})]}),P&&C&&(0,i.jsx)("div",{id:"mobile-nav-bottom",className:"absolute w-full bg-purple-extralight pb-5",style:{bottom:"".concat(eo,"px")},children:C})]}),(0,i.jsx)("div",{ref:B,className:"w-full",children:(0,i.jsx)("div",{className:c()("flex w-full flex-row justify-center xl:px-section","right"===n.align?"place-content-end":"place-content-start"),children:(0,i.jsxs)("div",{className:"flex w-full max-w-screen-2xl flex-row px-1",children:[!ee&&(0,i.jsxs)("div",{className:c()(u().toc,"sticky overflow-x-hidden overflow-y-scroll bg-white",{"no-scrollbar":!y},"right"===n.align?"order-2":"order-1",{"px-4 py-25 ":!j},{"h-fit":K}),style:{minWidth:g,padding:j,top:k,maxHeight:K?void 0:"".concat(z,"px")},children:[h,(0,i.jsx)("div",{className:"toc-title",children:null!==(l=n.title)&&void 0!==l?l:f}),(0,i.jsx)("ul",{id:b,className:"border-0 border-l-1 border-gray-18",children:Object.entries(L).map((e,t)=>{let[l,{title:o,anchor:s,lead:a,children:n}]=e;return(0,i.jsxs)("li",{className:c()("list-item",{"active-toc-item":!I&&R===l||I&&(0===t&&!Q||Q===l)}),"data-toc-anchor-key":l,children:[(0,i.jsxs)("button",{onClick:()=>{I?ea(l):$(s)},"aria-label":o,className:"first-level text-left",children:[a&&(0,i.jsx)("div",{className:"mb-1 text-[11px] leading-[12px]",children:a}),o]}),(0,i.jsx)("ul",{children:n&&Q===l&&Object.entries(n).map(e=>{let[t,l]=e;return(0,i.jsx)("li",{className:c()("second-level",{"active-toc-second-level-item":R===t}),"data-toc-anchor-key":t,children:(0,i.jsx)("button",{"aria-label":l.title,className:"text-left",onClick:()=>{$(l.anchor,I)},children:l.title})},"toc-item-".concat(t))})})]},"toc-item-".concat(l))})}),v]}),(0,i.jsx)("div",{id:p,className:c()("right"===n.align?"xl:order-1":"xl:order-2",{"w-full border-0 border-l-1 border-gray-18":y&&!ee}),children:d.map((e,t)=>{var l,o;return I&&(0!==t||Q)&&Q!==e.key?null:e&&(0,i.jsx)("div",{"data-toc-section-key":e.props._key,children:L[e.props._key]?(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"relative max-h-0",style:{top:ee?m.pu:w},children:(0,i.jsx)("button",{className:"absolute max-h-0",id:null!==(o=null===(l=L[e.props._key])||void 0===l?void 0:l.anchor)&&void 0!==o?o:""})}),(0,i.jsx)("div",{className:c()({"pb-16 lg:pb-25":I&&0===t}),children:e})]}):e},e.key)})})]})})})]}):(0,i.jsx)(i.Fragment,{children:d})}},51429:function(e){e.exports={toc:"TocView_toc__sOni5"}}}]);