const adDivIdPrefix=window.location.pathname.replace(/^\/|\/$/g,'')||'homepage';const setPageDepth=()=>{let pageDepth=localStorage.getItem('pageDepth');pageDepth=pageDepth?++pageDepth:1;localStorage.setItem('pageDepth',pageDepth);};const isTestPath=()=>{const pathsToTest=['how-to-stop-facebook-ads'];for(const path of pathsToTest){if(location.pathname.indexOf(path)!==-1)return true;}
return false;};const getSiblings=(e)=>{const siblings=[];if(!e.parentNode){return siblings;}
let sibling=e.parentNode.firstChild;while(sibling){if(sibling.nodeType===1&&sibling!==e){siblings.push(sibling);}
sibling=sibling.nextSibling;}
return siblings;};const hasTargetingConsent=()=>{const targetCookieId=',C0004,';if(typeof OptanonActiveGroups!=='undefined')if(OptanonActiveGroups.indexOf(targetCookieId)>=0)return true;return false;};const setPersonalizedAds=()=>{let nonPersonalizedAds=hasTargetingConsent()?0:1;console.log('> Set nonPersonalized ads: ',nonPersonalizedAds);window.googletag.pubads().setPrivacySettings({nonPersonalizedAds:!!nonPersonalizedAds,});(adsbygoogle=window.adsbygoogle||[]).requestNonPersonalizedAds=nonPersonalizedAds;window.Optanon.OnConsentChanged(()=>{let nonPersonalizedAds=hasTargetingConsent()?0:1;console.log('> Update nonPersonalized ads: ',nonPersonalizedAds);window.googletag.pubads().setPrivacySettings({nonPersonalizedAds:!!nonPersonalizedAds,});window.googletag.pubads().refresh();(adsbygoogle=window.adsbygoogle||[]).requestNonPersonalizedAds=nonPersonalizedAds;if(typeof initAdsenseAds!=='undefined'&&!adsbygoogle.loaded){console.log('> Consent granted, Adsense ads init');initAdsenseAds();}});};const setupAdDiv=({divElement,index})=>{const adDiv=divElement;const extraStyles=isTestPath()?'ad-fixed-size':'';adDiv.setAttribute('id',`div-gpt-ad-${adDivIdPrefix}-${index}`);adDiv.setAttribute('class',`text-center ad-center ad-container ${extraStyles}`);adDiv.innerHTML='<!-- /21830177955/aac_allaboutcookies_1 -->';return adDiv;};const displayAdSlots=(n)=>{const adUnitName=isTestPath()?'aac_adsense_1':'aac_allaboutcookies_1';const adDivId=`div-gpt-ad-${adDivIdPrefix}-${n}`;const lazyLoadConfig={fetchMarginPercent:400,renderMarginPercent:200,mobileScaling:2.0,};googletag.cmd.push(()=>{const leaderboardSizeMap=window.googletag.sizeMapping().addSize([1024,0],window.desktopSizes).addSize([768,0],window.tabletSizes).addSize([0,0],window.mobileExtendedTallSizes).build();googletag.defineSlot(`/21830177955/${adUnitName}`,window.allSizes,adDivId).defineSizeMapping(leaderboardSizeMap).addService(window.googletag.pubads());googletag.pubads().collapseEmptyDivs();googletag.pubads().setTargeting('path_name',location.pathname);if(isTestPath()){googletag.pubads().setTargeting('lp_test','1');}
googletag.pubads().enableLazyLoad(lazyLoadConfig);googletag.enableServices();googletag.display(adDivId);});};const findAdSpaces=()=>{const preDefinedAdsSlots=document.querySelectorAll('.pre-defined-ad-slot');if(preDefinedAdsSlots.length){return{isPredefinedSlots:true,elementsList:[...preDefinedAdsSlots],};}
const allElems=[...document.querySelectorAll('p')];const allowedSpaces=[5,10,14,20,30,40,50,60,70,80,90,100];let chosenElems=[];allElems.forEach((p)=>{const siblings=getSiblings(p);const len=p.innerText.length>100;const siblingOfH2=siblings.some((item)=>item.nodeName.toLowerCase()==='h2');if(len&&siblingOfH2){chosenElems.push(p);}});chosenElems=chosenElems.filter((k,v)=>allowedSpaces.includes(v+1));return{elementsList:chosenElems,};};const initAds=(interval=100,timeout=20000)=>{let counter=timeout/interval;const servicesIntervalId=setInterval(()=>{const{sessionData}=window;const isGPTLoaded=window.googletag&&window.googletag.apiReady;const isHomePage=window.location.pathname==='/';const isAdsEnabledOnPage=(sessionData&&sessionData.page&&sessionData.page.ads)||isHomePage;const dataDomeEnabled=window.datadome.DATADOME_ISBOT!=='';const isBlockedByDataDome=(window.datadome.DATADOME_ISBOT==='1'&&window.datadome.DATADOME_RULETYPE!=="Verified Bots");const blockedByBotDetection=dataDomeEnabled&&isBlockedByDataDome;if(!blockedByBotDetection&&isGPTLoaded&&isOneTrustLoaded()&&isAdsEnabledOnPage){clearInterval(servicesIntervalId);console.log('> Services loaded, build ads.');setPersonalizedAds();const adSpaces=findAdSpaces();const adSlotsSelector='[id*="div-gpt-ad"]';adSpaces.elementsList.forEach((element)=>{const divElement=adSpaces.isPredefinedSlots?element:document.createElement('div');const adSlotId=document.querySelectorAll(adSlotsSelector).length;const adDiv=setupAdDiv({divElement,index:adSlotId});if(!adSpaces.isPredefinedSlots)element.after(adDiv);});[...document.querySelectorAll(adSlotsSelector)].map((adSlot,index)=>{displayAdSlots(index);});if(typeof initAdsenseAds!=='undefined'){if(hasTargetingConsent()||localStorage.getItem('pageDepth')>1){console.log(`> Consent: ${hasTargetingConsent()}, pageDepth: ${localStorage.getItem('pageDepth')}, Adsense ads init`);initAdsenseAds();}}}
counter=counter<=0?0:counter-1;if(counter===0){console.log('> Ads were not loaded');clearInterval(servicesIntervalId);return false;}},interval);};setPageDepth();initAds();;